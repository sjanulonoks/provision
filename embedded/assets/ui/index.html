<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge">
  <title>Rocket Skates</title>
  <link rel="icon" type="../swagger-ui/image/png" href="images/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="../swagger-ui/image/png" href="images/favicon-16x16.png" sizes="16x16" />
  <link href='../swagger-ui/css/typography.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='../swagger-ui/css/reset.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='../swagger-ui/css/screen.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='../swagger-ui/css/reset.css' media='print' rel='stylesheet' type='text/css'/>
  <link href='../swagger-ui/css/print.css' media='print' rel='stylesheet' type='text/css'/>

  <script src='../swagger-ui/lib/object-assign-pollyfill.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/jquery-1.8.0.min.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/jquery.slideto.min.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/jquery.wiggle.min.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/handlebars-4.0.5.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/lodash.min.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/backbone-min.js' type='text/javascript'></script>
  <script src='../swagger-ui/swagger-ui.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/highlight.9.1.0.pack.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/highlight.9.1.0.pack_extended.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/jsoneditor.min.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/marked.js' type='text/javascript'></script>
  <script src='../swagger-ui/lib/swagger-oauth.js' type='text/javascript'></script>

  <script type="text/javascript">
    var subnets = {};
    $.getJSON( "../api/v3/interfaces", function( data ) {
        $.each( data, function( key, val ) {
          val.broadcast = true;
          subnets[val.Name] = val;
        });

        // add interfaces to subnets list
        $.getJSON( "../api/v3/subnets", function( data ) {
            $.each( data, function( key, val ) {
              val.broadcast = (subnets[val.Name] != null);
              subnets[val.Name] = val;
            });

            $.each( subnets, function( key, val ) {

              if (val.Subnet) {
                $("tbody#subnets").prepend( "<tr id='" + val.Name + "'><td>"
                  + val.Name + "</td><td>" 
                  + (val.broadcast ? 'broadcast' : 'relayed' ) + "</td><td>" 
                  + val.Subnet + "  </td><td>" 
                  + (val.OnlyReservations ? 'required' : 'optional') + "  </td><td>" 
                  + val.ActiveLeaseTime + "</td><td>"
                  + val.ReservedLeaseTime + "</td><td>"
                  + val.ActiveStart + ' to ' + val.ActiveEnd + "</td></tr>"
                );
              } else {
                $.each (val.Addresses, function (subkey, subval ) {
                  $("tbody#subnets").append( "<tr id='" + val.Name + "'><td>"
                    + "iface " + val.Name + "</td><td colspan='6'>" 
                    + "ADD BROADCAST SUBNET > " + subval + "</td></tr>"
                  );
                })
              };
            });
         });
     });

    $.getJSON( "../api/v3/bootenvs", function( data ) {
        $.each( data, function( key, val ) {
          $("tbody#bootenvs").append( "<tr id='" + val.Name + "'><td>" + val.Name + "</td><td>" + val.Available +"</td><td><a href=`"+ val.OS.IsoUrl + "'>" + val.OS.IsoFile +"</a></td></tr>" );
        });
     });

  </script>
</head>

<body class="swagger-section">
  <div id='header'>
    <h1>Rocket Skates</h1>
  </div>

  <h2>Subnets (<a href="http://rocket-skates.readthedocs.io/en/latest/doc/ui.html#subnets">UI Help</a> | <a href="/swagger-ui/#/subnets">API Help</a>)</h2>

  <table border="2" cellpadding="2">
    <thead>
      <tr>
        <th>Name/NIC</th>
        <th>Type</th>
        <th>Subnet</th>
        <th>Reservations</th>
        <th>Active Lease Time</th>
        <th>Reserved Lease Time</th>
        <th>Range</th>
      </tr>
    </thead>
    <tbody id="subnets">
    </tbody>
  </table>

  <table>
    <tr><th>Field</th><th>Value</th><th>Hint</th></tr>
    <tr><td>Name:</td><td id=subnet_name>_</td><td>Unique ID or NIC</td></tr>
    <tr><td>Subnet:</td><td id=subnet_subnet>_</td><td>CIDR for Subnet</td></tr>
    <tr><td>Next Server:</td><td id=subnet_subnet>_</td><td>(optional)</td></tr>
    <tr><td>Active Start IP:</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Active End IP:</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Active Lease Time:</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Reserved Lease Time:</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Only Reservations:</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Only Reservations:</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Option 67: Next Boot</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Option 6: DNS Server</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Option 15: Domain Name</td><td id=subnet_subnet>_</td><td></td></tr>
    <tr><td>Option 3: Default Gateway</td><td id=subnet_subnet>_</td><td></td></tr>
  </table>

  [ADD / UPDATE BUTTON] [DELETE BUTTON]

  <hr/>

  <table border="2" cellpadding="2">
    <thead>
      <tr><th>Interface</th><th>Address</th><th>Subnet</th></tr>
    </thead>
    <tbody id="relayed">
    </tbody>
  </table>

  <h2>Boot Environments (<a href="/swagger-ui/#/bootenvs">API Help</a>)</h2>
  <table border="2" cellpadding="2">
    <thead>
      <tr><th>Environment</th><th>Active</th><th>Path</th></tr>
    </thead>
    <tbody id="bootenvs">
    </tbody>
  </table>

  <div id="message-bar" class="swagger-ui-wrap" data-sw-translate>&nbsp;</div>
  <div id="ui-container" class="swagger-ui-wrap"></div>
</body>
</html>
o^o